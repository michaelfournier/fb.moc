var Blog=function(){var e={init:function(){console.log("ok")},myheight:function(){$(document).find("#ctn-media").removeClass("horizontale").removeAttr("style");var e=Math.ceil($(window).height()-$("#main_header").outerHeight(!0)-$("#tools").outerHeight(!0)-10);$(window).width()-$("#sidebar").outerWidth(!0),legendheight=$("#wrapper #legend").height();var t=$(document).find("#visuel img"),i=$(document).find("#media");ratioctnr=Math.round(100*(i.width()/e))/100,ratiopic=Math.round(100*t.attr("data-ratio"))/100,console.log(ratioctnr+"  "+ratiopic),Modernizr.mq("screen and (min-width: 768px)")?($(document).find("#main_nav").removeAttr("style"),$(document).find("#wrapper, #workslistmini").css("height",e),t.css("max-height",e-legendheight),ratioctnr>ratiopic?(t.addClass("horizontale"),$(document).find("#ctn-media").addClass("horizontale")):ratiopic>=ratioctnr&&(t.removeClass("horizontale"),$(document).find("#ctn-media").removeClass("horizontale").removeAttr("style")),$(document).find("#ctn-media").css("width",t.width())):($(document).find("#wrapper, #workslistmini, #visuel img").removeAttr("style"),$(document).find("#ctn-media, #visuel img").removeClass("horizontale"),$(document).find(".mCustomScrollbar").mCustomScrollbar("disable")),$(document).find("body").removeClass("spinner")}};return e.Models={},e.Collections={},e.Views={},e.Router={},e.Templates={},e}();this.Blog=this.Blog||{},this.Blog.Templates=this.Blog.Templates||{},this.Blog.Templates.bio=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<!-- template pour bio/biblio -->\n<section id="tools"></section>\n<div id="wrapper">		\n	<section id="sidebar" class="text"></section>\n	<section style="opacity:0" class="maincontent bio">\n	</section>\n</div>';return __p},this.Blog.Templates.home=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+="<!-- template pour home -->\n<div id='big-btn-home-up'></div>\n<div id='big-btn-home-down'></div>";return __p},this.Blog.Templates.news=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+='<!-- template pour news -->\n<div id="wrapper">		\n	<section style="background:none" class="maincontent news">\n		<div id="txtwrapper">\n		';var tab=[];tab[-1]=0,__p+="\n			",_.each(mynews,function(e,t){__p+="\n				",tab[t]=e.get("tax")[0].name,__p+="\n				",tab[t-1]+""!=tab[t]+""?(__p+="\n					",t>0&&(__p+="</section>"),__p+='\n					<section class="sub">\n						<h3>'+(null==(__t=e.get("tax")[0].name)?"":__t)+'</h3>\n						<div class="infosnews">\n							',__p+=_.isEmpty(e.get("customthumbmedium"))===!1?" \n								<div style='width:70%'>\n									<h4>"+(null==(__t=e.get("title"))?"":__t)+"</h4>						\n									"+(null==(__t=e.get("content"))?"":__t)+"\n								</div>\n								<figure style='width:30%'><img src='"+(null==(__t=e.get("customthumbmedium"))?"":__t)+"' /></figure>\n							":'\n								<div style="width: 100%">\n									<h4>'+(null==(__t=e.get("title"))?"":__t)+"</h4>						\n									"+(null==(__t=e.get("content"))?"":__t)+"\n								</div>	\n							",__p+="	\n						</div>\n					"):(__p+='\n						<div class="infosnews">\n							',__p+=_.isEmpty(e.get("customthumbmedium"))===!1?" \n								<div style='width:70%'>\n									<h4>"+(null==(__t=e.get("title"))?"":__t)+"</h4>						\n									"+(null==(__t=e.get("content"))?"":__t)+"\n								</div>\n								<figure style='width:30%'><img src='"+(null==(__t=e.get("customthumbmedium"))?"":__t)+"' /></figure>\n							":'\n								<div style="width: 100%">\n									<h4>'+(null==(__t=e.get("title"))?"":__t)+"</h4>						\n									"+(null==(__t=e.get("content"))?"":__t)+"\n								</div>	\n							",__p+="									\n						</div>\n					"),__p+="\n				"}),__p+="\n		</div>\n	</section>\n</div>"}return __p},this.Blog.Templates.notice=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<!-- template pour mentions -->\n<section id="tools"></section>\n<div id="wrapper">		\n	<section style="background:none" class="maincontent notice">\n		<div id="txtwrapper">\n			'+(null==(__t=mynotice.get("content"))?"":__t)+"\n		</div>\n	</section>\n</div>\n";return __p},this.Blog.Templates.picture=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<!-- template pour image avec lien (gallery) -->\n<img data-ratio="'+(null==(__t=mypicture.get("ratio"))?"":__t)+'" src="'+(null==(__t=mypicture.get("full"))?"":__t)+'" />\n<figcaption id="legend">'+(null==(__t=mypicture.get("legend"))?"":__t)+"</figcaption>";return __p},this.Blog.Templates.picturesGalNav=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+="<!-- template pour la nav pictureGalNavView --> \n	    ",_.size(gallery)>1&&(__p+="\n	    		<ul>\n			        ",_.each(gallery,function(e,t){__p+='       	\n			            	<li><a data-bypass="'+(null==(__t=t)?"":__t)+'" class="linkpic">'+(null==(__t=t+1)?"":__t)+"</a></li>\n			        "}),__p+="\n	        	</ul>\n	    ");return __p},this.Blog.Templates.textesContent=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='<!-- template  pour textes content -->\n<div id="txtwrapper">'+(null==(__t=texte.get("post").content)?"":__t)+'</div>\n<aside id="rightbar">\n\n	',texte.get("post").custom_fields._pinfostextes_fileurl&&(__p+='\n	 	<a class="btn-pdf" data-bypass href=\''+(null==(__t=texte.get("post").custom_fields._pinfostextes_fileurl)?"":__t)+' \' target="_blank"><span id="downloadpdf"></span>',__p+="en"===wp_vars.lang?"download text as pdf ":"télécharger le texte en pdf ",__p+=" </a>\n	"),__p+="\n\n	",texte.get("post").custom_fields._pinfosbio_fileurl&&(__p+='\n	 	<a class="btn-pdf" data-bypass href=\''+(null==(__t=texte.get("post").custom_fields._pinfosbio_fileurl)?"":__t)+' \' target="_blank"><span id="downloadpdf"></span>',__p+="en"===wp_vars.lang?"download text as pdf ":"télécharger le texte en pdf ",__p+=" </a>\n	"),__p+="\n\n	",texte.get("post").worksconnected&&(__p+="\n		",_.each(texte.get("post").worksconnected,function(e){__p+='\n	 		<a title="'+(null==(__t=e.title)?"":__t)+"\" href='#works/"+(null==(__t=e.slug)?"":__t)+" '>\n	 			<img src=\""+(null==(__t=e.thumb)?"":__t)+'" />\n	 		</a>\n		'}),__p+="\n	"),__p+="\n</aside>";return __p},this.Blog.Templates.textesMain=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<!-- template pour maintextes -->\n<section id="tools"></section>\n<div id="wrapper">		\n	<section id="sidebar" class="text"></section>\n	<section style="opacity:0" class="maincontent txt">\n	</section>\n</div>\n';return __p},this.Blog.Templates.textesSidebar=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='<!-- template  pour textes sidebar -->\n<div id="sidebarwrapper">	\n	 ',_.each(textes,function(e){__p+='\n	 	<a style="opacity:0" href="#'+(null==(__t=e.get("type"))?"":__t)+"/"+(null==(__t=e.get("slug"))?"":__t)+'">\n		 	<h4 ',slug===e.get("slug")&&(__p+=' class="actif" '),__p+=">"+(null==(__t=e.get("title"))?"":__t)+"</h4>\n		 	<h5>\n		 	",_.each(e.get("auteurs"),function(e){__p+="\n		 		"+(null==(__t=e.prenom+" "+e.nom)?"":__t)+"\n		 	"}),__p+="\n		 	</h5>\n	 	</a>\n	 "}),__p+="\n</div>";return __p},this.Blog.Templates.video=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+="<!-- template pour video -->\n",vwidth=myvideo.get("width"),vheight=myvideo.get("height"),vratio=vwidth/vheight,__p+='\n<div id="video">\n	'+(null==(__t=myvideo.get("html"))?"":__t)+'\n</div>\n<img style="visibility:hidden" data-ratio="'+(null==(__t=vratio)?"":__t)+'" src="'+(null==(__t=myvideo.get("thumbnail_url"))?"":__t)+'" />\n<figcaption id="legend">'+(null==(__t=myvideo.get("legend"))?"":__t)+"</figcaption>";return __p},this.Blog.Templates.workListTools=function(obj){obj||(obj={});var __p="";with(_.escape,Array.prototype.join,obj)__p+='<!-- template pour les outils de trie et d\'affichage de workslist -->\n<div id="indextools">\n	<nav id="displaying">\n		<ul>\n			<li>\n				<a ',"thumbs"===displaymode&&(__p+=' class="actif" '),__p+=" data-bypass id='displaythumb'>\n				</a>\n			</li>\n			<li>\n				<a ","list"===displaymode&&(__p+=' class="actif" '),__p+=" data-bypass id='displaylist'>\n				</a>\n			</li>\n			\n		</ul>\n	</nav>\n	<nav id=\"sorting\" ","list"===displaymode&&(__p+=' style="display:block" '),__p+=">\n		<ul>\n			<li><a ","annees"===sortkey&&(__p+=' class="actif" '),__p+=" data-bypass id='sortbydate'>date</a></li>\n			<li><a ","categories"===sortkey&&(__p+=' class="actif" '),__p+=" data-bypass  id='sortbycat'>categories</a></li>\n		</ul>\n	</nav>\n</div>";return __p},this.Blog.Templates.workMain=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='	<!-- template pour mainworks -->\n<section id="tools">\n<div id="hiddentitle"></div>\n<a id="closefull" title="close" data-bypass href="#"></a>\n	<nav id="navworks">\n 		<div id="unfoldworks"><a data-bypass href="#"></a></div>\n 		<div class="nextprevworks" id="prevwork"><a  href=""></a></div>	\n		<div class="nextprevworks" id="nextwork"><a href=""></a></div>\n		<div id="btnfull"><a title="full window" data-bypass href="#"></a></div>\n	</nav>\n</section>\n<div id="wrapper">			\n	<section id="sidebar">\n		<h3></h3>\n		<h4></h4>\n		<p id=\'description\'></p>\n	</section>\n	<section class="maincontent">\n		<nav id="navgal"></nav>\n			<div id="media">\n				<div data-bypass id="ctn-media">\n					<a data-bypass id="btn-media-next"></a>\n					<a data-bypass id="btn-media-prev"></a>\n					<figure id="visuel"></figure>\n				</div>\n			</div>\n	</section>\n</div>	';return __p},this.Blog.Templates.workSidebar=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+="<!-- template pour la sidebar work -->\n<h3>"+(null==(__t=work.get("title"))?"":__t)+"&nbsp;</h3>\n<h4>&mdash; "+(null==(__t=work.get("custom_fields")._pinfos_annee[0])?"":__t)+'</h4>\n<p id="description">'+(null==(__t=work.get("custom_fields")._pinfos_description)?"":__t)+"</p>\n",work.get("content").length>10&&(__p+='\n	<h5><a id="toogletext">\n	',__p+="en"===wp_vars.lang?'\n	<span id="down">&darr; read text</span><span id="up">&uarr; fold text</span></a></h5>\n	':'\n	<span id="down">&darr; lire le texte</span><span id="up">&uarr; replier le texte</span></a></h5>\n	',__p+="\n"),__p+='\n<div id="text">'+(null==(__t=work.get("content"))?"":__t)+"</div>";return __p},this.Blog.Templates.worksList=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+='<!-- template pour la workslist list -->\n<div id="wraplist-list">\n     	';var tab=[];tab[-1]=0,__p+="\n    ",_.each(works,function(e,t){__p+="\n             ",(_.isEmpty(e.get("gallery"))===!1||_.isEmpty(e.get("customthumb"))===!1)&&(__p+="\n             	","annees"===sortkey?tab[t]=works[t].get("custom_fields")._pinfos_annee:"categories"===sortkey&&(tab[t]=works[t].get("categories")[0].title),__p+="\n              	",tab[t-1]+""!=tab[t]+""?(__p+="\n             		",t>0&&(__p+="</div>"),__p+='\n             		<div class="segment">\n              		<div class="wrapthumb">\n              			<div class="sortitem">'+(null==(__t=tab[t])?"":__t)+'</div>\n	                    <a class="workthumb2" data-id="'+(null==(__t=e.get("id"))?"":__t)+'" title="'+(null==(__t=e.get("title"))?"":__t)+'" href="#works/'+(null==(__t=e.get("slug"))?"":__t)+'">       	\n	                    	',__p+=_.isEmpty(e.get("customthumb"))===!0?'      	\n	                    		<img width="60px" src=\''+(null==(__t=e.get("thumbmini"))?"":__t)+"' /><h5>"+(null==(__t=e.get("title"))?"":__t)+"</h5>\n	                    	":'\n	                    		<img width="60px" src=\''+(null==(__t=e.get("customthumbmini"))?"":__t)+"' /><h5>"+(null==(__t=e.get("title"))?"":__t)+"</h5>\n	                    	",__p+="\n	                    </a>\n                 	</div>             			\n             	"):(__p+='\n              		<div class="wrapthumb">\n	                    <a class="workthumb2" data-id="'+(null==(__t=e.get("id"))?"":__t)+'" title="'+(null==(__t=e.get("title"))?"":__t)+'" href="#works/'+(null==(__t=e.get("slug"))?"":__t)+'"> \n	                    	',__p+=_.isEmpty(e.get("customthumb"))===!0?'      	\n	                    		<img width="60px" src=\''+(null==(__t=e.get("thumbmini"))?"":__t)+"' /><h5>"+(null==(__t=e.get("title"))?"":__t)+"</h5>\n	                    	":'\n	                    		<img width="60px" src=\''+(null==(__t=e.get("customthumbmini"))?"":__t)+"' /><h5>"+(null==(__t=e.get("title"))?"":__t)+"</h5>\n	                    	",__p+="\n	                    </a>\n                 	</div>                  		\n             	"),__p+="             	\n           			\n             	\n             "),__p+="    \n    "}),__p+="\n</div>"}return __p},this.Blog.Templates.worksListMain=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<!-- template pour mainworklist -->\n<section id="tools">\n</section>\n<div id="wrapper">			\n	<section class="maincontent_index">\n	</section>\n</div>	';return __p},this.Blog.Templates.worksListMini=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+="<!-- template pour worklistmini -->\n";var tab=[];tab[-1]=0,__p+='\n<nav class="jThumbnailScroller" id="workslistmini">\n	<div class="jTscrollerContainer">	\n		<div class="jTscroller">						\n		    ',_.each(works,function(e,t){__p+="\n	              ",(_.isEmpty(e.get("gallery"))===!1||_.isEmpty(e.get("customthumb"))===!1)&&(__p+="\n			          	","annees"===sortkey?tab[t]=works[t].get("custom_fields")._pinfos_annee:"categories"===sortkey&&(tab[t]=works[t].get("categories")[0].title),__p+='\n	                    		<a data-id="'+(null==(__t=e.get("id"))?"":__t)+'" href="#works/'+(null==(__t=e.get("slug"))?"":__t)+'" class="thumb_color" id="'+(null==(__t=e.get("slug"))?"":__t)+'">\n	                    		\n	                    		',__p+=e.get("customthumb")?'\n	                    			<img width="120px" src=\''+(null==(__t=e.get("customthumb")[0])?"":__t)+'\' />\n	                    			<div class="thumbinfos">\n		                    			<h4>'+(null==(__t=works[t].get("title"))?"":__t)+"</h4>\n		                    			<h5>"+(null==(__t=tab[t])?"":__t)+"</h5>	\n	                    			</div>			                    			\n		                    	":"\n		                    		<img width='120px' src='"+(null==(__t=e.get("thumbmini"))?"":__t)+'\' />\n		                    		<div class="thumbinfos">\n		                    			<h4>'+(null==(__t=works[t].get("title"))?"":__t)+"</h4>\n		                    			<h5>"+(null==(__t=tab[t])?"":__t)+"</h5>	\n	                    			</div>				      \n		                    	",__p+="\n		                    	</a>\n	              "),__p+="    \n		    "}),__p+="\n		</div>\n	</div>\n</nav>"}return __p},this.Blog.Templates.worksListThumbs=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+='	<!-- template pour la workslist thumb -->\n	<div id="wraplist">\n      	';var tab=[];tab[-1]=0,__p+="\n	    ",_.each(works,function(e,t){__p+="\n              ",(_.isEmpty(e.get("gallery"))===!1||_.isEmpty(e.get("customthumb"))===!1)&&(__p+="\n              	","annees"===sortkey?tab[t]=works[t].get("custom_fields")._pinfos_annee:"categories"===sortkey&&(tab[t]=works[t].get("categories")[0].title),__p+='\n          		<div class="wrapthumb">\n                    <a class="workthumb" data-id="'+(null==(__t=e.get("id"))?"":__t)+'" title="'+(null==(__t=e.get("title"))?"":__t)+'" href="#works/'+(null==(__t=e.get("slug"))?"":__t)+'">       	\n                    	',__p+=_.isEmpty(e.get("customthumb"))===!0?"\n                    		<img src='"+(null==(__t=e.get("thumbnormal"))?"":__t)+"' />\n                    	":"\n                    		<img src='"+(null==(__t=e.get("customthumb"))?"":__t)+"' />\n                    	",__p+='\n                    </a>\n                    <h5 class="worktitle">'+(null==(__t=e.get("title"))?"":__t)+"</h5>\n\n             	</div>             			\n              "),__p+="    \n	    "}),__p+="\n</div>"}return __p};var Blog=function(e){return e.Models.Bio=Backbone.Model.extend({query:function(e){return this.urlRoot=wp_vars.blogurl+"/api/get_post?post_type=bio&custom_fields=_pinfosbio_fileurl&include=id,content,title,slug,custom_fields&slug="+e,this},initialize:function(){console.log("Bio Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.BioList=Backbone.Collection.extend({model:e.Models.Bio,all:function(){return this.url=wp_vars.blogurl+"/api/Mikictrl/get_custom_posts?post_type=bio&include=,d,auteurs,title,slug,type&order=asc",this},parse:function(e){return e.posts},initialize:function(){console.log("Biolist collection construite"),this.bind("reset",function(e){console.log(e)})}}),e}(Blog),Blog=function(e){return e.Models.HomePic=Backbone.Model.extend({initialize:function(){console.log("Home Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.HomePicslist=Backbone.Collection.extend({model:e.Models.HomePic,url:wp_vars.blogurl+"/api/get_post?post_type=page&custom_fields=_pmediagallery_blocspics&include=custom_fields,id&slug=home",parse:function(e){return e.post.gallery},initialize:function(){console.log("homepage collection construite")}}),e}(Blog),Blog=function(e){return e.Models.MenuElt=Backbone.Model.extend({defaults:{id:"?",url:"?",slug:"?"}}),e.Collections.MenuList=Backbone.Collection.extend({model:e.Models.MenuElt,url:wp_vars.blogurl+"/api/get_page_index?include=id,url,slug",parse:function(e){return e.pages},initialize:function(){console.log("Menu Collection Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e}(Blog),Blog=function(e){return e.Models.News=Backbone.Model.extend({query:function(e){return this.urlRoot=wp_vars.blogurl+"/api/get_post?post_type=works&include=id,categories,content,title,id&slug="+e,this},initialize:function(){console.log("news Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.NewsList=Backbone.Collection.extend({model:e.Models.News,all:function(){return this.url=wp_vars.blogurl+"/api/Mikictrl/get_custom_posts?post_type=news&include=id,title,content,gallery,slug&count=-1",this},parse:function(e){return e.posts},sortByType:function(){this.comparator=function(e){return[e.get("tax")[0].term_id,e.get("id")]},this.sortkey="newstype",this.sort(),console.log(this.models)},sortByDate:function(){this.comparator=function(e,t){var i=e;return e=t,t=i,console.log(e.get("tax")[0].term_id),console.log(e.get("title")),e.get("tax")[0].term_id<t.get("tax")[0].term_id?1:e.get("tax")[0].term_id>t.get("tax")[0].term_id?-1:e.get("menu_order")<t.get("menu_order")?1:e.get("menu_order")>t.get("menu_order")?-1:0},this.sortkey="newstype",this.sort()},initialize:function(){this.sortByDate(),console.log("NewsList collection construite"),this.bind("reset",function(e){console.log(e)})}}),e}(Blog),Blog=function(e){return e.Models.Notice=Backbone.Model.extend({query:function(){return this.urlRoot=wp_vars.blogurl+"/api/get_post?post_type=page&include=id,content,title,slug&slug=contact",this},parse:function(e){return e.post?e.post:e},initialize:function(){console.log("Notice Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e}(Blog),Blog=function(e){return e.Models.Picture=Backbone.Model.extend({initialize:function(){console.log("Picture Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.PicturesGallery=Backbone.Collection.extend({model:e.Models.Picture,initialize:function(){console.log("PicturesGallery collection construite")}}),e.Models.Video=Backbone.Model.extend({query:function(e){return this.urlRoot="http://vimeo.com/api/oembed.json?url="+encodeURIComponent(e)+"&portrait=0&title=0&byline=0",this},initialize:function(){console.log("Video Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.VideosGallery=Backbone.Collection.extend({model:e.Models.Video,initialize:function(){console.log("VideosGallery collection construite")}}),e}(Blog),Blog=function(e){return e.Models.Texte=Backbone.Model.extend({query:function(e){return this.urlRoot=wp_vars.blogurl+"/api/get_post?post_type=texts&custom_fields=_pinfostextes_fileurl&include=id,content,title,slug,custom_fields&slug="+e,this},initialize:function(){console.log("Texte Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.TextesList=Backbone.Collection.extend({model:e.Models.Texte,all:function(){return this.url=wp_vars.blogurl+"/api/Mikictrl/get_custom_posts?post_type=texts&custom_fields=_pinfostextes_sortname&include=custom_fields,id,auteurs,title,slug,type&key=_pinfostextes_sortname&order=asc",this},parse:function(e){return e.posts},initialize:function(){console.log("TextesList collection construite"),this.bind("reset",function(e){console.log(e)})}}),e}(Blog),Blog=function(e){return e.Models.Work=Backbone.Model.extend({query:function(e){return this.urlRoot=wp_vars.blogurl+"/api/get_post?post_type=works&custom_fields=_pmediagallery_blocspics,_pinfos_annee,_pinfos_description&include=id,categories,content,custom_fields,title,id&slug="+e,this},initialize:function(){console.log("Work Model Constructor"),this.bind("error",function(e,t){console.log(t)})}}),e.Collections.WorksList=Backbone.Collection.extend({model:e.Models.Work,all:function(){return this.url=wp_vars.blogurl+"/api/Mikictrl/get_custom_posts?post_type=works&key=_pinfos_annee&custom_fields=_pinfos_annee,_pinfos_description&order=desc&include=id,title,categories,content,gallery,custom_fields,slug&count=-1",this},query:function(){return this.url="/works/"+query,this},parse:function(e){return e.posts},sortByCat:function(){this.comparator=function(e){return[e.get("categories")[0].slug,e.get("slug")]},this.sortkey="categories",this.sort(),console.log(this.models)},sortByDate:function(){this.comparator=function(e,t){var i=e;return e=t,t=i,e.get("custom_fields")._pinfos_annee<t.get("custom_fields")._pinfos_annee?-1:e.get("custom_fields")._pinfos_annee>t.get("custom_fields")._pinfos_annee?1:e.get("slug")<t.get("slug")?1:e.get("slug")>t.get("slug")?-1:0},this.sortkey="annees",this.sort()},initialize:function(){this.sortkey="annees",this.displaymode="thumbs",console.log("WorksList collection construite"),this.bind("reset",function(e){console.log(e)})}}),e}(Blog),Blog=function(e){return e.Views.BaseView=Backbone.View.extend({renderNested:function(e,t,i,n){var o=i instanceof $?i:e.find(i);t.setElement(o).render(n)}}),e}(Blog),Blog=function(e){return e.Views.BioMainView=e.Views.BaseView.extend({el:$("#mainbb"),initialize:function(){this.template=e.Templates.bio(),_.bindAll(this,"render")},render:function(){this.$el.html(this.template);var t=this.renderNested,i=this.$el,n=this,o=new e.Views.BioSidebarView(Blog.mybiolist);return this.mybiosidebarview=o,Blog.mybiolist.all().fetch({update:!0,success:function(e){t(i,o,"#sidebar",e),n.renderText()}}),Blog.myheight(),$(document).find("body").addClass("spinner"),this},renderText:function(t){this.$el.find(".maincontent").empty();var i=this.$el,n=this.renderNested;t?slug=t:(slug=Blog.mybiolist.at(0).get("slug"),Blog.mybiolist.slug=slug);var o=new e.Views.TextesContentView(Blog.mybio);return Blog.mybio.query(slug).fetch({update:!0,success:function(e){console.log(e),n(i,o,".maincontent",e)}}),this}}),e}(Blog),Blog=function(e){return e.Views.BioSidebarView=Backbone.View.extend({initialize:function(e){_.bindAll(this,"render"),this.collection=e},render:function(){this.collection.slug||(this.collection.slug=this.collection.at(0).get("slug"));var t=e.Templates.textesSidebar({textes:this.collection.models,slug:this.collection.slug});return i=1,this.$el.html(t).find("a").each(function(){$(this).delay(50*i).animate({opacity:1}),i++}),sidebar=this.$el,sidebar.hasClass("mCustomScrollbar")||sidebar.mCustomScrollbar({set_height:"100%",scrollInertia:150,theme:"dark"}),$(document).find("body").removeClass("spinner"),sidebar.mCustomScrollbar("update"),this},showactif:function(e){this.$el.find("h4").removeClass("actif"),$(e.currentTarget).find("h4").addClass("actif")},events:{"click #sidebarwrapper a":"showactif"}}),e}(Blog),Blog=function(e){return e.Views.BioView=Backbone.View.extend({el:$("#mainbb"),initialize:function(t){this.model=t,this.template=e.Templates.bio()},render:function(){console.log(this.model);var e=this.template({mybio:this.model});this.$el.html(e).find(".bio").css("opacity",0),Blog.myheight();var t=this.$el.find("#txtwrapper");return t.mCustomScrollbar("destroy"),t.hasClass("mCustomScrollbar")||t.mCustomScrollbar({set_height:"100%",scrollInertia:150,theme:"dark"}),this.$el.find(".bio").animate({opacity:1},{duration:500,complete:function(){}}),this}}),e}(Blog),Blog=function(e){return e.Views.HomeView=Backbone.View.extend({el:$("#mainbb"),initialize:function(t){this.collection=t,this.template=e.Templates.home()},render:function(){console.log(this.collection);var e=this.template;this.$el.html(e);var t=[];_.each(this.collection.models,function(e){t.push(e.get("full"))}),$.backstretch(_.shuffle(t),{duration:4e3,fade:2050}),$(document).find("body").removeClass("spinner")},events:{"mouseenter #big-btn-home-up":"mouseOver","mouseenter #big-btn-home-down":"mouseOut"},mouseOver:function(){var e=this.$el.find("#big-btn-home-up");this.$el.parent().parent().find("#main_header").stop(!0,!0).animate({top:"0px"},{complete:function(){e.css("z-index",-1)}})},mouseOut:function(){var e=this.$el.find("#big-btn-home-up");this.$el.parent().parent().find("#main_header").stop(!0,!0).animate({top:"-40px"},{complete:function(){e.css("z-index",1)}})}}),e}(Blog),Blog=function(e){return e.Views.MenuView=Backbone.View.extend({el:$("#blog_mainmenu"),initialize:function(){this.template=$("#blog_mainmenu_template").html()},render:function(){var e=Mustache.to_html(this.template,{posts:this.collection.toJSON()});this.$el.html(e)}}),e}(Blog),Blog=function(e){return e.Views.NewsView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.collection=e},render:function(){console.log(this.collection),this.$el.html("");var t=e.Templates.news({mynews:this.collection.models});this.$el.html(t).find("#txtwrapper").css("opacity",0);var i=this.$el.find("#txtwrapper");i.mCustomScrollbar("destroy"),i.hasClass("mCustomScrollbar")||i.mCustomScrollbar({set_height:"100%",scrollInertia:150,theme:"dark"}),this.$el.find("#txtwrapper").animate({opacity:1},{duration:300,complete:function(){}}),Blog.myheight()}}),e}(Blog),Blog=function(e){return e.Views.NoticeView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.model=e},render:function(){console.log(this.model);var t=e.Templates.notice({mynotice:this.model});this.$el.html(t).find("#txtwrapper").css("opacity",0),Blog.myheight();var i=this.$el.find("#txtwrapper");i.mCustomScrollbar("destroy"),i.hasClass("mCustomScrollbar")||i.mCustomScrollbar({set_height:"100%",scrollInertia:150,theme:"dark"}),this.$el.find("#txtwrapper").animate({opacity:1},{duration:300,complete:function(){}})}}),e}(Blog),Blog=function(e){return e.Views.PictureView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.model=e},render:function(){var t=e.Templates.picture({mypicture:this.model}),i=this.$el.find("#visuel");i.addClass("spinner2");var n=this;this.$el.find(".maincontent #visuel, #btn-media-next, #btn-media-prev").animate({opacity:0},300,function(){i.html(t),n.showOnLoaded()})},showOnLoaded:function(){var e=this.$el.find(".maincontent");this.$el.find(".maincontent").imagesLoaded(function(){Blog.myheight(),e.find("#visuel").removeClass("spinner2"),e.parent().find("#sidebar").mCustomScrollbar("update"),e.find("#visuel, #btn-media-next, #btn-media-prev").animate({opacity:1},400)})}}),e}(Blog),Blog=function(e){return e.Views.PicturesGalNavView=Backbone.View.extend({el:$("#mainbb"),initialize:function(t){this.collection=t,this.idpic=0,Blog.mypicture=new e.Models.Picture,Blog.mypictureview=new e.Views.PictureView(Blog.mypicture),Blog.myvideo=new e.Models.Video,Blog.myvideoview=new e.Views.VideoView(Blog.myvideo)},render:function(){var t=e.Templates.picturesGalNav({gallery:this.collection.models});return this.gallerylength=this.collection.models.length,i=1,this.$el.find("#navgal").empty(),this.$el.find("#navgal").append(t).find("a").each(function(){$(this).delay(150*i).fadeIn(),i++}),this.showpicture(0),this},events:{"click a#btn-media-next":"nextpicture","click a#btn-media-prev":"prevpicture","click a.linkpic":"linktopic"},showpicture:function(e){console.log(this.collection.models[e].get("type")),"image"==this.collection.models[e].get("type")?(Blog.mypicture.set(this.collection.models[e].toJSON()),Blog.mypictureview.render()):(videourl=this.collection.models[e].get("videourl"),this.idpic,Blog.myvideo.query(videourl).fetch({update:!0,success:function(e){console.log(e),Blog.myvideoview.render(e)}})),this.idpic=e,this.activelink()},activelink:function(){this.$el.find("#navgal a").removeClass("actif"),this.$el.find("#navgal a[data-bypass|="+this.idpic+"]").addClass("actif")},linktopic:function(e){index=e.currentTarget.attributes["data-bypass"].value,this.idpic=index,this.showpicture(index)},nextpicture:function(e){console.log(e),i=this.idpic,i>=this.gallerylength-1?this.$el.find("#nextwork a").click():(i++,this.showpicture(i))},prevpicture:function(e){console.log(e),i=this.idpic,0>=i?this.$el.find("#prevwork a").click():(i--,this.showpicture(i))}}),e}(Blog),Blog=function(e){return e.Views.TextesContentView=Backbone.View.extend({initialize:function(e){_.bindAll(this,"render"),this.model=e},render:function(){var t=this.$el,i=e.Templates.textesContent({texte:this.model});return this.$el.animate({opacity:0},{duration:100,complete:function(){$(t).html(i);var e=$(t).find("#txtwrapper");e.mCustomScrollbar("destroy"),e.hasClass("mCustomScrollbar")||e.mCustomScrollbar({set_height:"100%",autoHideScrollbar:!0,autoDraggerLength:!1,scrollInertia:150,theme:"dark"}),Blog.myheight(),e.mCustomScrollbar("update"),$(t).animate({opacity:1},{duration:500})}}),this}}),e}(Blog),Blog=function(e){return e.Views.TextesMainView=e.Views.BaseView.extend({el:$("#mainbb"),initialize:function(){this.template=e.Templates.textesMain(),_.bindAll(this,"render")},render:function(){this.$el.html(this.template);var t=this.renderNested,i=this.$el;if(void 0===n){var n=new e.Views.TextesSidebarView(Blog.mytexteslist);Blog.mytexteslist.all().fetch({success:function(e){t(i,n,"#sidebar",e)}})}return Blog.myheight(),$(document).find("body").addClass("spinner"),this},renderText:function(t){this.$el.find(".maincontent").empty();var i=this.$el,n=this.renderNested;slug=t,this.mytextscontentview=new e.Views.TextesContentView(Blog.mytexte);var o=this.mytextscontentview;return Blog.mytexte.query(slug).fetch({success:function(e){n(i,o,".maincontent",e)}}),this}}),e}(Blog),Blog=function(e){return e.Views.TextesSidebarView=Backbone.View.extend({initialize:function(e){_.bindAll(this,"render"),this.collection=e},render:function(){var t=e.Templates.textesSidebar({textes:this.collection.models,slug:this.collection.slug});return i=1,this.$el.html(t).find("a").each(function(){$(this).delay(50*i).animate({opacity:1}),i++}),sidebar=this.$el,sidebar.hasClass("mCustomScrollbar")||sidebar.mCustomScrollbar({set_height:"100%",scrollInertia:150,theme:"dark"}),$(document).find("body").removeClass("spinner"),sidebar.mCustomScrollbar("update"),this},showactif:function(e){this.$el.find("h4").removeClass("actif"),$(e.currentTarget).find("h4").addClass("actif")},events:{"click #sidebarwrapper a":"showactif"}}),e}(Blog),Blog=function(e){return e.Views.VideoView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.model=e},render:function(){var t=e.Templates.video({myvideo:this.model}),i=this.$el.find("#visuel");i.addClass("spinner2");var n=this;this.$el.find(".maincontent #visuel").animate({opacity:0},300,function(){i.html(t),n.showOnLoaded()})},showOnLoaded:function(){var e=this.$el.find(".maincontent");this.$el.find(".maincontent").imagesLoaded(function(){Blog.myheight(),e.find("#visuel").removeClass("spinner2"),e.animate({opacity:1}),e.parent().find("#sidebar").mCustomScrollbar("update"),e.find("#visuel, #btn-media-next, #btn-media-prev").animate({opacity:1},400)
})}}),e}(Blog),Blog=function(e){return e.Views.WorkMainView=e.Views.BaseView.extend({el:$("#mainbb"),initialize:function(t){this.model=t,this.template=e.Templates.workMain(),_.bindAll(this,"render")},render:function(){this.renderWorksListMini();var e=this.template;return this.$el.html(e),this},renderWork:function(t){Blog.myworkslist.all().fetch({update:!0,success:function(i){Blog.myworkslist.workslug=t,myworkid=i.where({slug:t})[0].id,Blog.mywork=Blog.myworkslist.get(myworkid);var n=new e.Views.WorkView(Blog.mywork);n.render(Blog.mywork)}})},renderWorksListMini:function(){var t=this.$el,i=this.renderNested,n=new e.Views.WorksListMiniView(Blog.myworkslist);return Blog.myworkslist.all().fetch({update:!0,success:function(e){i(t,n,"#tools",e),console.log("list done")}}),this}}),e}(Blog),Blog=function(e){return e.Views.WorkSidebarView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.model=e},render:function(){var t=e.Templates.workSidebar({work:this.model});return this.$el.html(t),sidebar=this.$el,sidebar.mCustomScrollbar({set_height:"100%",scrollInertia:150,autoDraggerLength:!1,theme:"dark"}),this},events:{"click a#toogletext":"toogleText"},toogleText:function(e){console.log(e),e.preventDefault();var t=$(e.currentTarget),i=this.$el.find("#text"),n=this.$el;i.is(":hidden")?i.slideDown("fast",function(){t.find("#up").show(),t.find("#down").hide(),n.mCustomScrollbar("update")}):i.slideUp("fast",function(){t.find("#up").hide(),t.find("#down").show(),n.mCustomScrollbar("update")})}}),e}(Blog),Blog=function(e){return e.Views.WorkView=e.Views.BaseView.extend({el:$("#mainbb"),initialize:function(t){this.model=t,this.template=e.Templates.workMain(),this.i=0},renderPictures:function(){this.$el,this.renderNested,Blog.picturesgalview&&Blog.picturesgalview.undelegateEvents();var t=new e.Collections.PicturesGallery(this.model.get("gallery"));Blog.picturesgalview=new e.Views.PicturesGalNavView(t),Blog.picturesgalview.render()},renderVideos:function(){this.$el,this.renderNested,Blog.videosgalview&&Blog.videosgalview.undelegateEvents(),this.$el.find("#picvidswitcher a").removeClass("actif"),this.$el.find("#picvidswitcher #videos").addClass("actif");var t=new e.Collections.VideosGallery(Blog.mywork.get("galleryvideos"));Blog.videosgalview=new e.Views.VideosGalNavView(t),Blog.videosgalview.render()},picvidswitcher:function(e,t){e>0&&t>0?($("#picvidswitcher").html('<ul><li><a id="images" href="#" data-bypass>images('+e+')</a></li><li><a id="videos" href="#" data-bypass>vidéos('+t+")</a></li></ul>"),this.renderPictures()):t>0&&0===e?this.renderVideos():e>0&&0===t&&this.renderPictures()},renderSidebar:function(){var t=this.$el,i=this.renderNested;Blog.sidebarworksview&&Blog.sidebarworksview.undelegateEvents(),Blog.sidebarworksview=new e.Views.WorkSidebarView(this.model),i(t,Blog.sidebarworksview,"#sidebar",this.model)},render:function(){this.$el.find("#tools #hiddentitle").html("<h3>"+this.model.get("title")+"&nbsp;</h3>"+"<h4>&mdash; "+this.model.get("custom_fields")._pinfos_annee[0]+"</h4>"),this.showactif(this.model.get("slug")),this.model;var e,t;e=this.model.get("gallery")?this.model.get("gallery").length:0,t=this.model.get("galleryvideos")?this.model.get("galleryvideos").length:0,Blog.myworkslist&&this.nextwork();var i=this;return this.$el.find("#wrapper").fadeOut("fast",function(){i.renderSidebar(),$(this).hasClass("mCustomScrollbar")&&$(this).mCustomScrollbar("destroy"),$(this).css({"overflow-y":"hidden"}),$(this).find("#navgal, #visuel").empty(),$(this).find(".maincontent").css({overflow:"hidden",height:"100%"}),$(this).fadeIn("fast",function(){i.picvidswitcher(e,t)})}),this},scrolltonextprev:function(e){slug=$(e.currentTarget).attr("data-slug"),this.$el.find("#"+slug),this.$el.find("#workslistmini").mCustomScrollbar("scrollTo","#"+slug,{callbacks:this.showactif(slug)}),this.undelegateEvents()},showactif:function(e){item=this.$el.find("#"+e),this.$el.find(".jTscroller a").removeClass("actif"),item.addClass("actif")},nextwork:function(){var e=this.collection.indexOf(this.model),t=this.collection.length-1;nextmodel=this.collection.at(e+1),prevmodel=this.collection.at(e-1),slugprev=prevmodel?prevmodel.get("slug"):this.collection.at(t).get("slug"),prevhref="#works/"+slugprev,slugnext=nextmodel?nextmodel.get("slug"):this.collection.at(0).get("slug"),nexthref="#works/"+slugnext,console.log(this.$el.find("#nextwork").find("a")),this.$el.find("#nextwork").find("a").attr({href:nexthref,"data-slug":slugnext}),this.$el.find("#prevwork").find("a").attr({href:prevhref,"data-slug":slugprev})},events:{"click .nextprevworks a":"scrolltonextprev","click a#videos":"renderVideos","click a#images":"renderPictures"}}),e}(Blog),Blog=function(e){return e.Views.WorksListMainView=e.Views.BaseView.extend({el:$("#mainbb"),initialize:function(t){this.model=t,this.template=e.Templates.worksListMain(),_.bindAll(this,"render")},render:function(){console.log(this.template);var e=this.template;return this.$el.html(e),this.renderWorksList(),this},renderWorksList:function(){var t=this.$el,i=this.renderNested;Blog.myworkslistview||(Blog.myworkslistview=new e.Views.WorksListView(Blog.myworkslist));var n=Blog.myworkslistview,o=new e.Views.WorksListToolsView;return Blog.myworkslist.all().fetch({success:function(e){console.log(e),i(t,n,".maincontent_index",e),i(t,o,"#tools")}}),this},events:{"click #sortbydate":"sortbydate","click #sortbycat":"sortbycat","click #displaylist":"displaylist","click #displaythumb":"displaythumb"},sortbycat:function(e){$("#sorting a").removeClass("actif"),$(e.currentTarget).addClass("actif"),Blog.myworkslist.sortByCat()},sortbydate:function(e){$("#sorting a").removeClass("actif"),$(e.currentTarget).addClass("actif"),Blog.myworkslist.sortByDate()},displaylist:function(e){$("#displaying a").removeClass("actif"),$(e.currentTarget).addClass("actif"),Blog.myworkslistview.template="worksList",Blog.myworkslist.displaymode="list",Blog.myworkslistview.render(),this.$el.find("#sorting").css("display","block")},displaythumb:function(e){$("#displaying a").removeClass("actif"),$(e.currentTarget).addClass("actif"),Blog.myworkslistview.template="worksListThumbs",Blog.myworkslist.displaymode="thumbs",Blog.myworkslist.sortByDate(),this.$el.find("#sorting a").removeClass("actif"),this.$el.find("#sortbydate").addClass("actif"),this.$el.find("#sorting").css("display","none")},myheight:function(){var e=$("#mainbb").offset(),t=e.top,i=$(window).height()-(t+$("#main_header").height()+40);$("#wrapper").css("height",i),console.log(i)}}),e}(Blog),Blog=function(e){return e.Views.WorksListMiniView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.collection=e,_.bindAll(this,"render")},render:function(){var t=e.Templates.worksListMini({works:this.collection.models,sortkey:this.collection.sortkey});i=1,this.$el.append(t);var n=this.$el.find("#workslistmini");return n.imagesLoaded(function(){n.thumbnailScroller({scrollerType:"hoverPrecise",scrollerOrientation:"vertical",acceleration:4,scrollSpeed:800,noScrollCenterSpace:1})}),n.hasClass("mCustomScrollbar")||n.mCustomScrollbar({set_height:"100%",scrollInertia:150,autoDraggerLength:!1,theme:"dark"}),this},events:{"click #unfoldworks a":"toggleworks","click #btnfull a":"gofullwindow","click #closefull":"closefullwindow","mouseleave #workslistmini":"toggleworks"},gofullwindow:function(){$(document).find("html").addClass("fullwindow"),Blog.myheight()},closefullwindow:function(){$(document).find("html").removeClass("fullwindow"),Blog.myheight()},scrolltoactive:function(){var e=this.$el.find("#"+this.collection.workslug);this.$el.find("#workslistmini").mCustomScrollbar("update"),this.$el.find("#workslistmini").mCustomScrollbar("scrollTo","#"+this.collection.workslug,{callbacks:this.showactif(e)})},showactif:function(e){this.$el.find(".jTscroller a").removeClass("actif"),e.addClass("actif")},toggleworks:function(){elt=this.$el.find("#workslistmini"),0>=elt.width()?(elt.stop(!0,!0).animate({width:"260px",complete:this.scrolltoactive()},150),this.$el.find("#unfoldworks a").addClass("fold")):(this.$el.find("#sidebar").css("display","none"),elt.stop(!0,!0).animate({width:0},150),this.$el.find("#unfoldworks a").removeClass("fold"))}}),e}(Blog),Blog=function(e){return e.Views.WorksListToolsView=Backbone.View.extend({el:$("#mainbb"),initialize:function(e){this.collection=e},render:function(){var t=e.Templates.workListTools({sortkey:Blog.myworkslist.sortkey,displaymode:Blog.myworkslist.displaymode});return this.$el.html(t),this}}),e}(Blog),Blog=function(e){return e.Views.WorksListView=Backbone.View.extend({initialize:function(e){this.collection=e,this.template="worksListThumbs",this.collection.bind("sort",this.render,this)},render:function(){var t=e.Templates[this.template]({works:this.collection.models,sortkey:this.collection.sortkey});this.$el.removeAttr("style").html(t);var i=this.$el,n=this.$el.find("#wraplist");return n.masonry({itemSelector:".wrapthumb",isAnimated:!Modernizr.csstransitions,columnWidth:".wrapthumb",animationOptions:{duration:"fast",easing:"linear",queue:!1}}),i.mCustomScrollbar({set_height:"100%",scrollInertia:150,autoDraggerLength:!1,advanced:{updateOnContentResize:!0},theme:"dark"}),this.$el.imagesLoaded().done(function(){Blog.myheight(),i.mCustomScrollbar("update"),setTimeout(function(){n.masonry()},1e3)}).fail(function(){console.log("all images loaded, at least one is broken")}).progress(function(e,t){$(t.img.offsetParent).stop().animate({opacity:1},{complete:n.masonry()})}),this}}),e}(Blog),Blog=function(e){return e.Router.RoutesManager=Backbone.Router.extend({initialize:function(){Blog.myhomepics=new e.Collections.HomePicslist,Blog.myworkslist=new e.Collections.WorksList,Blog.mywork=new e.Models.Work,Blog.mytexteslist=new e.Collections.TextesList,Blog.mytexte=new e.Models.Texte,Blog.mybiolist=new e.Collections.BioList,Blog.mybio=new e.Models.Bio,Blog.mynews=new e.Collections.NewsList,Blog.mynotice=new e.Models.Notice,Blog.currentView=new Backbone.View,this.bind("route",function(e,t){console.log("Different Page: "+e+t)})},routes:{"works/:slug_post":"displayWork",works:"displayWorksList",texts:"displayText","texts/:slug_post":"displayText",bio:"displayBio","bio/:slug_post":"displayBio",contact:"notice",home:"home",news:"news","":"home","*path":"home"},selectMenu:function(e){$("#main_nav a").removeClass("actif"),$('#main_nav a[href="#'+e+'"]').addClass("actif")},home:function(){this.selectMenu("home"),$(document).find("body").addClass("spinner"),$("#mainbb").empty(),Blog.homeview||(Blog.homeview=new e.Views.HomeView(Blog.myhomepics)),Blog.myhomepics.fetch({success:function(e){Blog.homeview.render(e),Blog.currentView=Blog.homeview}})},news:function(){this.killbackstrech(),this.selectMenu("news"),$(document).find("body").addClass("spinner"),Blog.newsview||(Blog.newsview=new e.Views.NewsView(Blog.mynews)),$("#mainbb").empty(),Blog.mynews.all().fetch({success:function(e){Blog.newsview.render(e),Blog.currentView=Blog.newsview}})},notice:function(){this.selectMenu("contact"),this.killbackstrech(),Blog.noticeview=new e.Views.NoticeView(Blog.mynotice),Blog.mynotice.query().fetch({success:function(e){Blog.noticeview.render(e),Blog.currentView=Blog.noticeview}})},displayWorksList:function(){this.selectMenu("works"),this.killbackstrech(),$(document).find("body").addClass("spinner"),Blog.mymainworkslistview||(Blog.mymainworkslistview=new e.Views.WorksListMainView),Blog.mymainworkslistview.render(),Blog.currentView=Blog.mymainworkslistview},displayWork:function(t){this.selectMenu("works"),this.killbackstrech(),Blog.mymainworkview||(Blog.mymainworkview=new e.Views.WorkMainView),this.switchView(Blog.mymainworkview),Blog.mymainworkview.renderWork(t)},displayText:function(t){this.selectMenu("texts"),this.killbackstrech(),$(document).find("body").addClass("spinner"),Blog.textesmainview||(Blog.textesmainview=new e.Views.TextesMainView),t?(Blog.mytexteslist.slug=t,this.switchView(Blog.textesmainview),Blog.textesmainview.renderText(t)):(Blog.mytexteslist.slug="",Blog.textesmainview.render(),Blog.currentView=Blog.textesmainview)},displayBio:function(t){this.selectMenu("bio"),this.killbackstrech(),$(document).find("body").addClass("spinner"),Blog.biomainview||(Blog.biomainview=new e.Views.BioMainView),t?(Blog.mybiolist.slug=t,this.switchView(Blog.biomainview),Blog.biomainview.renderText(t)):(Blog.mybiolist.slug="",Blog.biomainview.render(),Blog.currentView=Blog.biomainview)},switchView:function(e){e.cid!=Blog.currentView.cid&&(e.render(),Blog.currentView=e)},killbackstrech:function(){$(".backstretch").fadeOut("fast",function(){$(this).remove()})}}),Blog.myapprouter=new e.Router.RoutesManager,myroot="en"!=wp_vars.lang?wp_vars.lang:"",Backbone.history.start({pushState:!0,root:myroot}),$(document).on("click","a[href]:not([data-bypass])",function(e){var t={prop:$(this).prop("href"),attr:$(this).attr("href")},i=location.protocol+"//"+location.host+"/";t.prop.slice(0,i.length)===i&&(e.preventDefault(),Backbone.history.navigate(t.attr,!0),langprefix="fr"===i?"/":"/fr/",$("#qtrans a").attr("href",langprefix+Backbone.history.fragment))}),e}(Blog);(function(e){Blog.myheight(),e(window).on("resize",_.bind(e.debounce(100,!1,Blog.myheight),this)),e("#mobilemenu").on("click",function(){var t=e("#main_nav");t.is(":hidden")?t.slideDown("fast",function(){}):t.slideUp("fast",function(){e(this).removeAttr("style")})})})(jQuery);